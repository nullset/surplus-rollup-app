!function(){"use strict";function n(n,t,e){var u=document.createElement(n);return t&&(u.className=t),e&&e.appendChild(u),u}new RegExp("^("+Object.keys({xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"}).join("|")+")-(.*)");var t=function(n,t){var e=new o(n,t);return function(){return e.current()}};Object.defineProperty(t,"default",{value:t}),t.root=function(n){var t=g,e=0===n.length?v:new o(null,null),u=void 0,l=0===n.length?null:function(){null!==d?h.disposes.add(e):A(e)};return g=e,null===d?u=function(n,t,e){try{return null===t?n():n(t)}finally{g=e}}(n,l,t):(u=null===l?n():n(l),g=t),u},t.on=function(n,e,u,l){var o;return Array.isArray(n)&&(o=n,n=function(){for(var n=0;n<o.length;n++)o[n]()}),l=!!l,t(s,u);function s(t){var u=p;return n(),l?l=!1:(p=null,t=e(t),p=u),t}},t.effect=function(n,t){new o(n,t)},t.data=function(n){var t=new l(n);return function(n){return 0===arguments.length?t.current():t.next(n)}},t.value=function(n,e){var u=t.data(n),l=-1;return function(t){if(0===arguments.length)return u();if(!(e?e(n,t):n===t)){var o=h.time;if(l===o)throw new Error("conflicting values: "+t+" is not the same as "+n);l=o,n=t,u(t)}return t}},t.freeze=function(n){var t=void 0;if(null!==d)t=n();else{(d=h).changes.reset();try{t=n(),m()}finally{d=null}}return t},t.sample=function(n){var t,e=p;return null!==e?(p=null,t=n(),p=e):t=n(),t},t.cleanup=function(n){null!==g?null===g.cleanups?g.cleanups=[n]:g.cleanups.push(n):console.warn("cleanups created without a root or parent will never be run")},t.makeDataNode=function(n){return new l(n)},t.makeComputationNode=function(n,t){return new o(n,t)},t.isFrozen=function(){return null!==d},t.isListening=function(){return null!==p};var e=function(){return function(){this.time=0,this.changes=new r,this.updates=new r,this.disposes=new r}}(),u={time:function(){return h.time}},l=function(){function n(n){this.value=n,this.pending=i,this.log=null}return n.prototype.current=function(){return null!==p&&function(n,t){null===n.log&&(n.log=new s);w(n.log,t)}(this,p),this.value},n.prototype.next=function(n){if(null!==d)if(this.pending!==i){if(n!==this.pending)throw new Error("conflicting changes: "+n+" !== "+this.pending)}else this.pending=n,h.changes.add(this);else null!==this.log?(this.pending=n,h.changes.add(this),m()):this.value=n;return n},n.prototype.clock=function(){return u},n}(),o=function(){function n(n,t){if(this.state=c,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owned=null,this.cleanups=null,this.fn=n,this.value=t,this.age=h.time,null!==n){var e=g,u=p;null===e&&console.warn("computations created without a root or parent will never be disposed"),g=p=this,null===d?function(n){d=h,h.changes.reset(),h.updates.reset();try{n.value=n.fn(n.value),(h.changes.count>0||h.updates.count>0)&&(h.time++,y(h))}finally{d=g=p=null}}(this):this.value=this.fn(this.value),e&&e!==v&&(null===e.owned?e.owned=[this]:e.owned.push(this)),g=e,p=u}}return n.prototype.current=function(){if(null!==p){if(this.age===h.time){if(this.state===f)throw new Error("circular dependency");b(this)}!function(n,t){null===n.log&&(n.log=new s);w(n.log,t)}(this,p)}return this.value},n.prototype.clock=function(){return u},n}(),s=function(){return function(){this.node1=null,this.node1slot=0,this.nodes=null,this.nodeslots=null}}(),r=function(){function n(){this.items=[],this.count=0}return n.prototype.reset=function(){this.count=0},n.prototype.add=function(n){this.items[this.count++]=n},n.prototype.run=function(n){for(var t=this.items,e=0;e<this.count;e++)n(t[e]),t[e]=null;this.count=0},n}(),i={},c=0,a=1,f=2,h=new e,d=null,p=null,g=null,v=new o(null,null);function w(n,t){var e,u=null===t.source1?-1:null===t.sources?0:t.sources.length;null===n.node1?(n.node1=t,n.node1slot=u,e=-1):null===n.nodes?(n.nodes=[t],n.nodeslots=[u],e=0):(e=n.nodes.length,n.nodes.push(t),n.nodeslots.push(u)),null===t.source1?(t.source1=n,t.source1slot=e):null===t.sources?(t.sources=[n],t.sourceslots=[e]):(t.sources.push(n),t.sourceslots.push(e))}function m(){var n=g;h.updates.reset(),h.time++;try{y(h)}finally{d=p=null,g=n}}function y(n){var t=d,e=0;for(d=n,n.disposes.reset();0!==n.changes.count||0!==n.updates.count||0!==n.disposes.count;)if(e>0&&n.time++,n.changes.run(k),n.updates.run(b),n.disposes.run(A),e++>1e5)throw new Error("Runaway clock detected");d=t}function k(n){n.value=n.pending,n.pending=i,n.log&&x(n.log)}function x(n){var t=n.node1,e=n.nodes;if(null!==t&&E(t),null!==e)for(var u=0,l=e.length;u<l;u++)E(e[u])}function E(n){var t=h.time;n.age<t&&(n.age=t,n.state=a,h.updates.add(n),null!==n.owned&&function n(t){for(var e=0;e<t.length;e++){var u=t[e];u.age=h.time,u.state=c,null!==u.owned&&n(u.owned)}}(n.owned),null!==n.log&&x(n.log))}function b(n){if(n.state===a){var t=g,e=p;g=p=n,n.state=f,C(n,!1),n.value=n.fn(n.value),n.state=c,g=t,p=e}}function C(n,t){var e,u,l=n.source1,o=n.sources,s=n.sourceslots,r=n.cleanups,i=n.owned;if(null!==r){for(e=0;e<r.length;e++)r[e](t);n.cleanups=null}if(null!==i){for(e=0;e<i.length;e++)A(i[e]);n.owned=null}if(null!==l&&(j(l,n.source1slot),n.source1=null),null!==o)for(e=0,u=o.length;e<u;e++)j(o.pop(),s.pop())}function j(n,t){var e,u,l=n.nodes,o=n.nodeslots;-1===t?n.node1=null:(e=l.pop(),u=o.pop(),t!==l.length&&(l[t]=e,o[t]=u,-1===u?e.source1slot=t:e.sourceslots[u]=t))}function A(n){n.fn=null,n.log=null,C(n,!0)}const N=(z=n("div",null,null),n("h2",null,z).textContent="My App",z);var z;document.body.appendChild(N)}();
